(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b("undefined"!=typeof jQuery?jQuery:window.Zepto)})(function(b){function w(a){var c=a.data;a.isDefaultPrevented()||(a.preventDefault(),b(a.target).ajaxSubmit(c))}function z(a){var c=a.target,f=b(c);if(!f.is("[type=submit],[type=image]")){c=f.closest("[type=submit]");if(0===c.length)return;c=c[0]}var d=this;d.clk=c;"image"==c.type&&(void 0!==a.offsetX?(d.clk_x=a.offsetX,d.clk_y=a.offsetY):"function"==typeof b.fn.offset?(f=f.offset(),d.clk_x=a.pageX-f.left,d.clk_y=a.pageY-f.top):(d.clk_x=a.pageX-c.offsetLeft,d.clk_y=a.pageY-c.offsetTop));setTimeout(function(){d.clk=d.clk_x=d.clk_y=null},100)}function r(){if(b.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}var A,C;A=void 0!==b("<input type='file'/>").get(0).files;C=void 0!==window.FormData;var G=!!b.fn.prop;b.fn.attr2=function(){if(!G)return this.attr.apply(this,arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"===typeof a?a:this.attr.apply(this,arguments)};b.fn.load=function(a,c){function f(a){for(var f in a){var h=a[f];d.find("[name='"+f+"']").each(function(){d.setFieldValue(b(this),h)})}null!=c.onLoadSuccess&&c.onLoadSuccess.call(d,a)}var d=this;null==c&&(c={});if("string"==typeof a){var h={};null!=c.param&&(h=c.param);null!=c.onBeforeLoad&&0==c.onBeforeLoad.call(d,h)||b.ajax({url:a,data:h,dataType:"json",success:function(a){f(a)},error:function(){null!=c.onLoadError&&c.onLoadError.apply(d,arguments)}})}else f(a)};b.fn.setFieldValue=function(a,c){if(0!=b(a).length){null==c&&(c="");var f=b(a)[0].tagName.toLocaleLowerCase(),d=b(a).attr("type");if("input"==f)if("radio"==d)b(a)[0].checked=b(a).val()==c;else if("checkbox"==d){if(null!=c){c=(c+"").split(",");for(var h=!1,g=0;g<c.length;g++)if(b(a).val()==c[g]){h=b(a)[0].checked=!0;break}h||(b(a)[0].checked=!1)}}else b(a).val(c);else"select"==f?(b(a).val(c),b(a).trigger("change")):"textarea"==f?(h=b(a).attr("data-editor"),null!=h&&""!=h?eval(h).setContent(c):b(a).val(c)):b(a).html(c);"undefined"!=typeof this.reRenderUI&&(c=b(a).attr("data-ui"),"combosearch"==c?d=c:"input"==f?"radio"==d&&"switch"==c&&(d="switch"):d=f,this.reRenderUI(a,d))}};b.fn.getFormData=function(a){null==a&&(a=b(document));a.find("input").each(function(){var a=b(this);null!=a.attr("name")&&(a=b.fieldValue(a,!0),null===a&&"undefined"==typeof a?a.constructor==Array&&b.merge(val,a):val.push(a))})};b.fn.ajaxSubmit=function(a){function c(e){e=b.param(e,a.traditional).split("&");var c=e.length,m=[],d,f;for(d=0;d<c;d++)e[d]=e[d].replace(/\+/g," "),f=e[d].split("="),m.push([decodeURIComponent(f[0]),decodeURIComponent(f[1])]);return m}function f(e){for(var m=new FormData,d=0;d<e.length;d++)m.append(e[d].name,e[d].value);if(a.extraData)for(e=c(a.extraData),d=0;d<e.length;d++)e[d]&&m.append(e[d][0],e[d][1]);a.data=null;d=b.extend(!0,{},b.ajaxSettings,a,{contentType:!1,processData:!1,cache:!1,type:h||"POST"});a.uploadProgress&&(d.xhr=function(){var e=b.ajaxSettings.xhr();e.upload&&e.upload.addEventListener("progress",function(b){var e=0,c=b.loaded||b.position,d=b.total;b.lengthComputable&&(e=Math.ceil(c/d*100));a.uploadProgress(b,c,d,e)},!1);return e});d.data=null;var f=d.beforeSend;d.beforeSend=function(b,e){e.data=a.formData?a.formData:m;f&&f.call(this,b,e)};return b.ajax(d)}function d(c){function d(a){var b=null;try{a.contentWindow&&(b=a.contentWindow.document)}catch(D){r("cannot get iframe.contentWindow document: "+D)}if(b)return b;try{b=a.contentDocument?a.contentDocument:a.document}catch(D){r("cannot get iframe.contentDocument: "+D),b=a.document}return b}function m(){function a(){try{var b=d(x).readyState;r("state = "+b);b&&"uninitialized"==b.toLowerCase()&&setTimeout(a,50)}catch(H){r("Server abort: ",H," (",H.name,")"),f(2),w&&clearTimeout(w),w=void 0}}var e=n.attr2("target"),c=n.attr2("action"),m=n.attr("enctype")||n.attr("encoding")||"multipart/form-data";g.setAttribute("target",q);h&&!/post/i.test(h)||g.setAttribute("method","POST");c!=k.url&&g.setAttribute("action",k.url);k.skipEncodingOverride||h&&!/post/i.test(h)||n.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});k.timeout&&(w=setTimeout(function(){F=!0;f(1)},k.timeout));var l=[];try{if(k.extraData)for(var p in k.extraData)k.extraData.hasOwnProperty(p)&&(b.isPlainObject(k.extraData[p])&&k.extraData[p].hasOwnProperty("name")&&k.extraData[p].hasOwnProperty("value")?l.push(b('<input type="hidden" name="'+k.extraData[p].name+'">').val(k.extraData[p].value).appendTo(g)[0]):l.push(b('<input type="hidden" name="'+p+'">').val(k.extraData[p]).appendTo(g)[0]));k.iframeTarget||v.appendTo("body");x.attachEvent?x.attachEvent("onload",f):x.addEventListener("load",f,!1);setTimeout(a,15);try{g.submit()}catch(K){document.createElement("form").submit.apply(g)}}finally{g.setAttribute("action",c),g.setAttribute("enctype",m),e?g.setAttribute("target",e):n.removeAttr("target"),b(l).remove()}}function f(a){if(!l.aborted&&!A)if(t=d(x),t||(r("cannot access response document"),a=2),1===a&&l)l.abort("timeout"),y.reject(l,"timeout");else if(2==a&&l)l.abort("server abort"),y.reject(l,"error","server abort");else if(t&&t.location.href!=k.iframeSrc||F){x.detachEvent?x.detachEvent("onload",f):x.removeEventListener("load",f,!1);a="success";var e;try{if(F)throw"timeout";var c="xml"==k.dataType||t.XMLDocument||b.isXMLDoc(t);r("isXml="+c);if(!c&&window.opera&&(null===t.body||!t.body.innerHTML)&&--B){r("requeing onLoad callback, DOM not available");setTimeout(f,250);return}var m=t.body?t.body:t.documentElement;l.responseText=m?m.innerHTML:null;l.responseXML=t.XMLDocument?t.XMLDocument:t;c&&(k.dataType="xml");l.getResponseHeader=function(a){return{"content-type":k.dataType}[a.toLowerCase()]};m&&(l.status=Number(m.getAttribute("status"))||l.status,l.statusText=m.getAttribute("statusText")||l.statusText);var h=(k.dataType||"").toLowerCase(),g=/(json|script|text)/.test(h);if(g||k.textarea){var p=t.getElementsByTagName("textarea")[0];if(p)l.responseText=p.value,l.status=Number(p.getAttribute("status"))||l.status,l.statusText=p.getAttribute("statusText")||l.statusText;else if(g){var n=t.getElementsByTagName("pre")[0],q=t.getElementsByTagName("body")[0];n?l.responseText=n.textContent?n.textContent:n.innerText:q&&(l.responseText=q.textContent?q.textContent:q.innerText)}}else"xml"==h&&!l.responseXML&&l.responseText&&(l.responseXML=C(l.responseText));try{z=I(l,h,k)}catch(E){a="parsererror",l.error=e=E||a}}catch(E){r("error caught: ",E),a="error",l.error=e=E||a}l.aborted&&(r("upload aborted"),a=null);l.status&&(a=200<=l.status&&300>l.status||304===l.status?"success":"error");"success"===a?(k.success&&k.success.call(k.context,z,"success",l),y.resolve(l.responseText,"success",l),u&&b.event.trigger("ajaxSuccess",[l,k])):a&&(void 0===e&&(e=l.statusText),k.error&&k.error.call(k.context,l,a,e),y.reject(l,"error",e),u&&b.event.trigger("ajaxError",[l,k,e]));u&&b.event.trigger("ajaxComplete",[l,k]);u&&!--b.active&&b.event.trigger("ajaxStop");k.complete&&k.complete.call(k.context,l,a);A=!0;k.timeout&&clearTimeout(w);setTimeout(function(){k.iframeTarget?v.attr("src",k.iframeSrc):v.remove();l.responseXML=null},100)}}var g=n[0],p,k,u,q,v,x,l,F,w,y=b.Deferred();y.abort=function(a){l.abort(a)};if(c)for(p=0;p<e.length;p++)c=b(e[p]),G?c.prop("disabled",!1):c.removeAttr("disabled");k=b.extend(!0,{},b.ajaxSettings,a);k.context=k.context||k;q="jqFormIO"+(new Date).getTime();k.iframeTarget?(v=b(k.iframeTarget),(p=v.attr2("name"))?q=p:v.attr2("name",q)):(v=b('<iframe name="'+q+'" src="'+k.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"}));x=v[0];l={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){var e="timeout"===a?"timeout":"aborted";r("aborting upload... "+e);this.aborted=1;try{x.contentWindow.document.execCommand&&x.contentWindow.document.execCommand("Stop")}catch(D){}v.attr("src",k.iframeSrc);l.error=e;k.error&&k.error.call(k.context,l,e,a);u&&b.event.trigger("ajaxError",[l,k,e]);k.complete&&k.complete.call(k.context,l,e)}};(u=k.global)&&0===b.active++&&b.event.trigger("ajaxStart");u&&b.event.trigger("ajaxSend",[l,k]);if(k.beforeSend&&!1===k.beforeSend.call(k.context,l,k))return k.global&&b.active--,y.reject(),y;if(l.aborted)return y.reject(),y;(c=g.clk)&&(p=c.name)&&!c.disabled&&(k.extraData=k.extraData||{},k.extraData[p]=c.value,"image"==c.type&&(k.extraData[p+".x"]=g.clk_x,k.extraData[p+".y"]=g.clk_y));c=b("meta[name=csrf-token]").attr("content");(p=b("meta[name=csrf-param]").attr("content"))&&c&&(k.extraData=k.extraData||{},k.extraData[p]=c);k.forceSync?m():setTimeout(m,10);var z,t,B=50,A,C=b.parseXML||function(a,b){window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},J=b.parseJSON||function(a){return window.eval("("+a+")")},I=function(a,e,c){var d=a.getResponseHeader("content-type")||"",m="xml"===e||!e&&0<=d.indexOf("xml");a=m?a.responseXML:a.responseText;m&&"parsererror"===a.documentElement.nodeName&&b.error&&b.error("parsererror");c&&c.dataFilter&&(a=c.dataFilter(a,e));"string"===typeof a&&("json"===e||!e&&0<=d.indexOf("json")?a=J(a):("script"===e||!e&&0<=d.indexOf("javascript"))&&b.globalEval(a));return a};return y}if(!this.length)return r("ajaxSubmit: skipping submit process - no element selected"),this;var h,g,n=this;"function"==typeof a?a={success:a}:void 0===a&&(a={});h=a.type||this.attr2("method");g=a.url||this.attr2("action");(g=(g="string"===typeof g?b.trim(g):"")||window.location.href||"")&&(g=(g.match(/^([^#]+)/)||[])[1]);a=b.extend(!0,{url:g,success:b.ajaxSettings.success,type:h||b.ajaxSettings.type,dataType:"json",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);g={};this.trigger("form-pre-serialize",[this,a,g]);if(g.veto)return r("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&!1===a.beforeSerialize(this,a))return r("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var q=a.traditional;void 0===q&&(q=b.ajaxSettings.traditional);var e=[],m,p=this.formToArray(a.semantic,e);a.data&&(a.extraData=a.data,m=b.param(a.data,q));if(a.beforeSubmit&&!1===a.beforeSubmit(p,this,a))return r("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[p,this,a,g]);if(g.veto)return r("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;g=b.param(p,q);m&&(g=g?g+"&"+m:m);"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+g,a.data=null):a.data=g;var u=[];a.resetForm&&u.push(function(){n.resetForm()});a.clearForm&&u.push(function(){n.clearForm(a.includeHidden)});if(!a.dataType&&a.target){var v=a.success||function(){};u.push(function(e){var c=a.replaceTarget?"replaceWith":"html";b(a.target)[c](e).each(v,arguments)})}else a.success&&u.push(a.success);a.success=function(b,e,c){for(var d=a.context||this,m=0,f=u.length;m<f;m++)u[m].apply(d,[b,e,c||n,n])};if(a.error){var w=a.error;a.error=function(b,e,c){w.apply(a.context||this,[b,e,c,n])}}if(a.complete){var z=a.complete;a.complete=function(b,e){z.apply(a.context||this,[b,e,n])}}m=0<b("input[type=file]:enabled",this).filter(function(){return""!==b(this).val()}).length;g="multipart/form-data"==n.attr("enctype")||"multipart/form-data"==n.attr("encoding");q=A&&C;r("fileAPI :"+q);var B;!1!==a.iframe&&(a.iframe||(m||g)&&!q)?a.closeKeepAlive?b.get(a.closeKeepAlive,function(){B=d(p)}):B=d(p):B=(m||g)&&q?f(p):b.ajax(a);n.removeData("jqxhr").data("jqxhr",B);for(m=0;m<e.length;m++)e[m]=null;this.trigger("form-submit-notify",[this,a]);return this};b.fn.ajaxForm=function(a){a=a||{};a.delegation=a.delegation&&b.isFunction(b.fn.on);if(!a.delegation&&0===this.length){var c=this.selector,f=this.context;if(!b.isReady&&c)return r("DOM not ready, queuing ajaxForm"),b(function(){b(c,f).ajaxForm(a)}),this;r("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));return this}return a.delegation?(b(document).off("submit.form-plugin",this.selector,w).off("click.form-plugin",this.selector,z).on("submit.form-plugin",this.selector,a,w).on("click.form-plugin",this.selector,a,z),this):this.ajaxFormUnbind().bind("submit.form-plugin",a,w).bind("click.form-plugin",a,z)};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(a,c){var f=[];if(0===this.length)return f;var d=this[0],h=this.attr("id"),g=a?d.getElementsByTagName("*"):d.elements;g&&!/MSIE [678]/.test(navigator.userAgent)&&(g=b(g).get());h&&(h=b(':input[form="'+h+'"]').get(),h.length&&(g=(g||[]).concat(h)));if(!g||!g.length)return f;var n,q,e,m,p;n=0;for(p=g.length;n<p;n++)if(m=g[n],(h=m.name)&&!m.disabled)if(a&&d.clk&&"image"==m.type)d.clk==m&&(f.push({name:h,value:b(m).val(),type:m.type}),f.push({name:h+".x",value:d.clk_x},{name:h+".y",value:d.clk_y}));else if((e=b.fieldValue(m,!0))&&e.constructor==Array)for(c&&c.push(m),q=0,m=e.length;q<m;q++)f.push({name:h,value:e[q]});else if(A&&"file"==m.type)if(c&&c.push(m),e=m.files,e.length)for(q=0;q<e.length;q++)f.push({name:h,value:e[q],type:m.type});else f.push({name:h,value:"",type:m.type});else null!==e&&"undefined"!=typeof e&&(c&&c.push(m),f.push({name:h,value:e,type:m.type,required:m.required}));!a&&d.clk&&(a=b(d.clk),c=a[0],(h=c.name)&&!c.disabled&&"image"==c.type&&(f.push({name:h,value:a.val()}),f.push({name:h+".x",value:d.clk_x},{name:h+".y",value:d.clk_y})));return f};b.fn.formSerialize=function(a){return b.param(this.formToArray(a))};b.fn.fieldSerialize=function(a){var c=[];this.each(function(){var f=this.name;if(f){var d=b.fieldValue(this,a);if(d&&d.constructor==Array)for(var h=0,g=d.length;h<g;h++)c.push({name:f,value:d[h]});else null!==d&&"undefined"!=typeof d&&c.push({name:this.name,value:d})}});return b.param(c)};b.fn.fieldValue=function(a){for(var c=[],f=0,d=this.length;f<d;f++){var h=b.fieldValue(this[f],a);null===h||"undefined"==typeof h||h.constructor==Array&&!h.length||(h.constructor==Array?b.merge(c,h):c.push(h))}return c};b.fieldValue=function(a,c){var f=a.name,d=a.type,h=a.tagName.toLowerCase();void 0===c&&(c=!0);if(c&&(!f||a.disabled||"reset"==d||"button"==d||("checkbox"==d||"radio"==d)&&!a.checked||("submit"==d||"image"==d)&&a.form&&a.form.clk!=a||"select"==h&&-1==a.selectedIndex))return null;if("select"==h){h=a.selectedIndex;if(0>h)return null;c=[];a=a.options;f=(d="select-one"==d)?h+1:a.length;for(h=d?h:0;h<f;h++){var g=a[h];if(g.selected){var n=g.value;n||(n=g.attributes&&g.attributes.value&&!g.attributes.value.specified?g.text:g.value);if(d)return n;c.push(n)}}return c}return b(a).val()};b.fn.clearForm=function(a){return this.each(function(){b("input,select,textarea",this).clearFields(a)})};b.fn.clearFields=b.fn.clearInputs=function(a){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var f=this.type,d=this.tagName.toLowerCase();c.test(f)||"textarea"==d?this.value="":"checkbox"==f||"radio"==f?this.checked=!1:"select"==d?this.selectedIndex=-1:"file"==f?/MSIE/.test(navigator.userAgent)?b(this).replaceWith(b(this).clone(!0)):b(this).val(""):a&&(!0===a&&/hidden/.test(f)||"string"==typeof a&&b(this).is(a))&&(this.value="")})};b.fn.reset=function(){var a=this;return this.each(function(){if("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType){var c=[];b(this).find(".js_no_reset").each(function(){c.push({control:this,value:b(this).val()})});this.reset();for(var f=null,d=0;d<c.length;d++)f=c[d],b(f.control).val(f.value);a.find("*").removeClass("validation-succe validation-fail");"undefined"!=typeof a.reRenderUI&&a.reRenderUI()}})};b.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};b.fn.selected=function(a){void 0===a&&(a=!0);return this.each(function(){var c=this.type;"checkbox"==c||"radio"==c?this.checked=a:"option"==this.tagName.toLowerCase()&&(c=b(this).parent("select"),a&&c[0]&&"select-one"==c[0].type&&c.find("option").selected(!1),this.selected=a)})};b.fn.ajaxSubmit.debug=!1;b.fn.bindForm=function(a){this.settings=b.extend({},{debug:!1,position:"bottom",dataType:{phone:/((\d{11})|^((\d{3,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)/,email:/^[0-9a-zA-Z_\-\.]+@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,mobile:/^(13|14|15|17|18)\d{9}$/,url:/^(http|https):\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"])*$/,ip:/^(0|[1-9]\d?|[0-1]\d{2}|2[0-4]\d|25[0-5]).(0|[1-9]\d?|[0-1]\d{2}|2[0-4]\d|25[0-5]).(0|[1-9]\d?|[0-1]\d{2}|2[0-4]\d|25[0-5]).(0|[1-9]\d?|[0-1]\d{2}|2[0-4]\d|25[0-5])$/,amount:/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,postal:/^[1-9]\d{5}$/,qq:/^[1-9]\d{4,12}$/,english:/^[A-Za-z]+$/,chinese:/^[\u0391-\uFFE5]+$/,positive_integer:/^\d+$/,negative_integer:/^((-\d+)|(0+))$/,discount:/(^[1-9]?$)|(^[1-9]\.[0-9]{1}?$)/},dataTypeMsg:{phone:"\u4e0d\u662f\u6709\u6548\u7684\u7535\u8bdd\u53f7",email:"\u4e0d\u662f\u6709\u6548\u7684\u7535\u5b50\u90ae\u7bb1",mobile:"\u4e0d\u662f\u6709\u6548\u7684\u624b\u673a\u53f7\u7801",url:"\u4e0d\u662f\u6709\u6548\u7684\u7f51\u5740",ip:"\u4e0d\u662f\u6709\u6548\u7684IP\u5730\u5740",amount:"\u4e0d\u662f\u6709\u6548\u7684\u91d1\u989d",postal:"\u4e0d\u662f\u6709\u6548\u7684\u90ae\u653f\u7f16\u7801",qq:"\u4e0d\u662f\u6709\u6548\u7684QQ\u53f7\u7801",english:"\u5fc5\u987b\u662f\u82f1\u6587",chinese:"\u5fc5\u987b\u662f\u4e2d\u6587",positive_integer:"\u5fc5\u987b\u662f\u6b63\u6574\u6570",negative_integer:"\u5fc5\u987b\u662f\u8d1f\u6574\u6570",discount:"1-9.9\u4e4b\u95f4\u7684\u6570\u5b57\uff0c\u7cbe\u786e\u5230\u5c0f\u6570\u70b9\u540e1\u4f4d"}},a);var c=this;if(null==c.attr("bind_valid")){c.attr("bind_valid","1");c.attr("novalidate","novalidate");var f=this;c.on("blur",".required",function(){f.validValue(b(this))});c.on("keyup","[data-datatype]",function(){f.validValue(b(this))});c.on("keyup","[data-maxlength]",function(){f.validateLength(b(this))});c.on("keyup","[data-maxcharlength]",function(){f.validateCharLength(b(this))});c.on("submit",function(){return f.valid()});this.valid=function(){var a=this.validForm();null!=this.afterValid&&this.afterValid.call(this,a);return a};this.init=function(){var a=!0;c.find("[data-maxlength]").each(function(e){if(b(this).hasClass("input_fail"))return c.find(".input_fail").eq(0).focus(),!1;f.validateLength(b(this))||(a=!1)});c.find("[data-maxcharlength]").each(function(e){if(b(this).hasClass("input_fail"))return c.find(".input_fail").eq(0).focus(),!1;f.validateCharLength(b(this))||(a=!1)});a||c.find(".input_fail").eq(0).focus();return a};this.validForm=function(){var a=!0;c.find(".required").each(function(e){f.validValue(b(this))||(a=!1)});c.find("[data-datatype]").each(function(e){b(this)[0].disabled||f.validValue(b(this))||(a=!1)});c.find("[data-maxlength]").each(function(e){b(this).hasClass("input_fail")&&(c.find(".input_fail").eq(0).focus(),a=!1);f.validateLength(b(this))||(a=!1)});c.find("[data-maxcharlength]").each(function(e){b(this).hasClass("input_fail")&&(c.find(".input_fail").eq(0).focus(),a=!1);f.validateCharLength(b(this))||(a=!1)});a||c.find(".input_fail").eq(0).focus();return a};var d=function(a,b){g.call(a,b);a.one("keyup",function(){f.validValue(a)})};this.validValue=function(a){var c=!0;a=b(a);if(0<a.length&&"INPUT"!=a[0].tagName&&"TEXTAREA"!=a[0].tagName&&"SELECT"!=a[0].tagName)return!0;var e=a.val();if(""==e&&a.hasClass("required")){c=a.attr("data-msg");if(null==c||""==c)c="\u4e0d\u80fd\u4e3a\u7a7a\uff01";d(a,c);c=!1}else""!=e||a.hasClass("required")||h.call(a);if(""!=e)if(this.validateLength(a))if(this.validateCharLength(a)){var g=a.attr("data-datatype");if(null!=g&&""!=g){var n=this.settings.dataType[g];null==n&&(n=eval(g));if(!n.test(e)){c=a.attr("data-datatypemsg");if(null==c||""==c)c=this.settings.dataTypeMsg[g];if(null==c||""==c)c="\u8f93\u5165\u6709\u8bef\uff01";d(a,c);return!1}}g=a.attr("data-equalcontron");if(null!=g&&e!=b(g).val()){c=a.attr("data-equalmsg");if(null==c||""==c)c="\u4e24\u6b21\u8f93\u5165\u7684\u503c\u4e0d\u4e00\u81f3";d(a,c);return!1}h.call(a);a.unbind("keyup",function(){f.validValue(a)})}else c=!1;else c=!1;return c};this.validateCharLength=function(a){var c=!0;a=b(a);var e=a.attr("data-maxcharlength");if(null!=e&&0<e){var d=a.val().length,f=a.attr("data-wrodlength");null!=f&&""!=f&&b(f).html(d);d>e?(g.call(a,"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7"+e+"\u4e2a\u5b57\u7b26\uff01"),c=!1):h.call(a,void 0)}return c};this.validateLength=function(a){var c=!0;a=b(a);var e=a.attr("data-maxlength");if(null!=e&&0<e){var d=a.val(),d=Math.round(this.getValueLength(d)),f=a.attr("data-wrodlength");null!=f&&""!=f&&b(f).html(d);d>e?(g.call(a,"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7"+e/2+"\u4e2a\u6c49\u5b57\u6216"+e+"\u4e2a\u82f1\u6587\u5b57\u6bcd\uff01"),c=!1):h.call(a,void 0)}return c};this.getValueLength=function(a){if(null==a||""==a)return 0;var b=a.match(/[^\x00-\xff]/ig);return a.length+(null==b?0:b.length)};this.fail=function(a,c){g.call(b(a),c)};this.removeFail=function(a){n.call(b(a))};this.succe=function(a){h.call(b(a))};var h=function(){var a=b(this);q.call(a).parent().removeClass("validation-fail").addClass("validation-succe");a.removeClass("input_fail")},g=function(a){var c=b(this),d=q.call(c);d.find(".js_msg").text(a);c.addClass("input_fail");a=d.parent().removeClass("validation-succe").addClass("validation-fail").find(".ui-wrap");0<a.length&&(a=a.parent().prev().outerWidth()+a.outerWidth(),d.css("left",a))},n=function(){var a=b(this);b(this).next(".validation-msg-wrap").remove();a.parent().removeClass("validation-fail");a.removeClass("input_fail")},q=function(){var a=b(this).next(".validation-msg-wrap");0==a.length&&(a=b('<div class="validation-msg-wrap"><div class="tipbox right"><i class="arrow"></i><div class="tipbox-content js_msg"></div></div></div>'),b(this).after(a));return a};"undefined"!=typeof this.ui&&this.ui().render();return this}}});