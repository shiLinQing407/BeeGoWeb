(function(f){var g={sortOrder:"bs.table.sortOrder",sortName:"bs.table.sortName",pageNumber:"bs.table.pageNumber",pageList:"bs.table.pageList",columns:"bs.table.columns",searchText:"bs.table.searchText",filterControl:"bs.table.filterControl"};var e=function(A){var B=A.$header;if(A.options.height){B=A.$tableHeader}return B};var h=function(A){var B="select, input";if(A.options.height){B="table select, table input"}return B};var o=function(){return !!(navigator.cookieEnabled)};var w=function(D,A){var B=-1;for(var C=0;C<A.length;C++){if(D.toLowerCase()===A[C].toLowerCase()){B=C;break}}return B};var n=function(B,D,C){if((!B.options.cookie)||(!o())||(B.options.cookieIdTable==="")){return}if(w(D,B.options.cookiesEnabled)===-1){return}D=B.options.cookieIdTable+"."+D;var A=v(B.options.cookieExpire);switch(B.options.cookieStorage){case"cookieStorage":document.cookie=[D,"=",C,"; expires="+A,B.options.cookiePath?"; path="+B.options.cookiePath:"",B.options.cookieDomain?"; domain="+B.options.cookieDomain:"",B.options.cookieSecure?"; secure":""].join("");break;case"localStorage":localStorage.setItem(D,C);break;case"sessionStorage":sessionStorage.setItem(D,C);break;default:return false}return true};var q=function(B,A,C){if(!C){return null}if(w(C,B.options.cookiesEnabled)===-1){return null}C=A+"."+C;switch(B.options.cookieStorage){case"cookieStorage":return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(C).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;case"localStorage":return localStorage.getItem(C);case"sessionStorage":return sessionStorage.getItem(C);default:return null}};var d=function(B,A,C){C=A+"."+C;switch(B.options.cookieStorage){case"cookieStorage":document.cookie=[encodeURIComponent(C),"=","; expires=Thu, 01 Jan 1970 00:00:00 GMT",B.options.cookiePath?"; path="+B.options.cookiePath:"",B.options.cookieDomain?"; domain="+B.options.cookieDomain:""].join("");break;case"localStorage":localStorage.removeItem(C);break;case"sessionStorage":sessionStorage.removeItem(C);break}return true};var v=function(A){var B=A.replace(/[0-9]*/,"");A=A.replace(/[A-Za-z]{1,2}/,"");switch(B.toLowerCase()){case"s":A=+A;break;case"mi":A=A*60;break;case"h":A=A*60*60;break;case"d":A=A*24*60*60;break;case"m":A=A*30*24*60*60;break;case"y":A=A*365*24*60*60;break;default:A=undefined;break}return A===undefined?"":"; max-age="+A};var c=function(A){setTimeout(function(){var C=JSON.parse(q(A,A.options.cookieIdTable,g.filterControl));if(!A.options.filterControlValuesLoaded&&C){A.options.filterControlValuesLoaded=true;var B={},F=e(A),E=h(A),D=function(H,G){f(G).each(function(J,I){f(H).val(I.text);B[I.field]=I.text})};F.find(E).each(function(){var H=f(this).closest("[data-field]").data("field"),G=f.grep(C,function(I){return I.field===H});D(this,G)});A.initColumnSearch(B)}},250)};f.extend(f.fn.bootstrapTable.defaults,{cookie:false,cookieExpire:"1d",cookiePath:null,cookieDomain:null,cookieSecure:null,cookieIdTable:"",cookiesEnabled:["bs.table.sortOrder","bs.table.sortName","bs.table.pageNumber","bs.table.pageList","bs.table.columns","bs.table.searchText","bs.table.filterControl"],cookieStorage:"cookieStorage",filterControls:[],filterControlValuesLoaded:false});f.fn.bootstrapTable.methods.push("getCookies");f.fn.bootstrapTable.methods.push("deleteCookie");f.extend(f.fn.bootstrapTable.utils,{setCookie:n,getCookie:q});var l=f.fn.bootstrapTable.Constructor,k=l.prototype.init,j=l.prototype.initTable,i=l.prototype.initServer,z=l.prototype.onSort,r=l.prototype.onPageNumber,a=l.prototype.onPageGo,t=l.prototype.onPageListChange,s=l.prototype.onPageFirst,u=l.prototype.onPagePre,b=l.prototype.onPageNext,y=l.prototype.onPageLast,p=l.prototype.toggleColumn,m=l.prototype.selectPage,x=l.prototype.onSearch;l.prototype.init=function(){var B=0;this.options.filterControls=[];this.options.filterControlValuesLoaded=false;this.options.cookiesEnabled=typeof this.options.cookiesEnabled==="string"?this.options.cookiesEnabled.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.cookiesEnabled;if(this.options.filterControl){var A=this;this.$el.on("column-search.bs.table",function(F,E,G){var D=true;for(var C=0;C<A.options.filterControls.length;C++){if(A.options.filterControls[C].field===E){A.options.filterControls[C].text=G;D=false;break}}if(D){A.options.filterControls.push({field:E,text:G})}n(A,g.filterControl,JSON.stringify(A.options.filterControls))}).on("post-body.bs.table",c(A))}k.apply(this,Array.prototype.slice.apply(arguments))};l.prototype.initServer=function(){var D=this,B=[],E=function(F){return F.filterControl&&F.filterControl==="select"},C=function(F){return F.filterData&&F.filterData!=="column"},A=function(){var F=JSON.parse(q(D,D.options.cookieIdTable,g.filterControl));return D.options.cookie&&F};B=f.grep(D.columns,function(F){return E(F)&&!C(F)});l.prototype.initServer=i;if(this.options.filterControl&&A()&&B.length===0){return}i.apply(this,Array.prototype.slice.apply(arguments))};l.prototype.initTable=function(){j.apply(this,Array.prototype.slice.apply(arguments));this.initCookie()};l.prototype.initCookie=function(){if(!this.options.cookie){return}if(this.options.cookieIdTable===""){this.options.cookieIdTable=this.$el.prop("id")}if((this.options.cookieIdTable==="")||(this.options.cookieExpire==="")||(!o())){throw new Error("Configuration error. Please review the cookieIdTable, cookieExpire properties, if those properties are ok, then this browser does not support the cookies")}var A=q(this,this.options.cookieIdTable,g.sortOrder),C=q(this,this.options.cookieIdTable,g.sortName),B=q(this,this.options.cookieIdTable,g.pageNumber),F=q(this,this.options.cookieIdTable,g.pageList),E=JSON.parse(q(this,this.options.cookieIdTable,g.columns)),D=q(this,this.options.cookieIdTable,g.searchText);this.options.sortOrder=A?A:this.options.sortOrder;this.options.sortName=C?C:this.options.sortName;this.options.pageNumber=B?+B:this.options.pageNumber;this.options.pageSize=F?F===this.options.formatAllRows()?F:+F:this.options.pageSize;this.options.searchText=D?D:"";if(E){f.each(this.columns,function(G,H){H.visible=f.inArray(H.field,E)!==-1})}};l.prototype.onSort=function(){z.apply(this,Array.prototype.slice.apply(arguments));n(this,g.sortOrder,this.options.sortOrder);n(this,g.sortName,this.options.sortName)};l.prototype.onPageNumber=function(){r.apply(this,Array.prototype.slice.apply(arguments));n(this,g.pageNumber,this.options.pageNumber)};l.prototype.onPageGo=function(){a.apply(this,Array.prototype.slice.apply(arguments));n(this,g.pageNumber,this.options.pageNumber)};l.prototype.onPageListChange=function(){t.apply(this,Array.prototype.slice.apply(arguments));n(this,g.pageList,this.options.pageSize);n(this,g.pageNumber,this.options.pageNumber)};l.prototype.onPageFirst=function(){s.apply(this,Array.prototype.slice.apply(arguments));n(this,g.pageNumber,this.options.pageNumber)};l.prototype.onPagePre=function(){u.apply(this,Array.prototype.slice.apply(arguments));n(this,g.pageNumber,this.options.pageNumber)};l.prototype.onPageNext=function(){b.apply(this,Array.prototype.slice.apply(arguments));n(this,g.pageNumber,this.options.pageNumber)};l.prototype.onPageLast=function(){y.apply(this,Array.prototype.slice.apply(arguments));n(this,g.pageNumber,this.options.pageNumber)};l.prototype.toggleColumn=function(){p.apply(this,Array.prototype.slice.apply(arguments));var A=[];f.each(this.columns,function(B,C){if(C.visible){A.push(C.field)}});n(this,g.columns,JSON.stringify(A))};l.prototype.selectPage=function(A){m.apply(this,Array.prototype.slice.apply(arguments));n(this,g.pageNumber,A)};l.prototype.onSearch=function(){var A=Array.prototype.slice.apply(arguments);x.apply(this,A);if(f(A[0].currentTarget).parent().hasClass("search")){n(this,g.searchText,this.searchText)}};l.prototype.getCookies=function(){var B=this;var A={};f.each(g,function(C,D){A[C]=q(B,B.options.cookieIdTable,D);if(C==="columns"){A[C]=JSON.parse(A[C])}});return A};l.prototype.deleteCookie=function(A){if((A==="")||(!o())){return}d(this,this.options.cookieIdTable,g[A])}})(jQuery);